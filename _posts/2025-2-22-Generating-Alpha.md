---
date: 2023-12-20 12:26:40
layout: post
title: "Alpha Generation"
subtitle: "Quantitative Edge: Building Alpha-Generating Trading Systems"
description: "Quantitative Edge: Building Alpha-Generating Trading Systems"
image: /assets/img/alpha.png
optimized_image: /assets/img/alpha.png
category: Quantitative Trading
tags:
  - Factor Analysis
  - Backtesting
  - Risk Analysis
  - Portfolio Optimization
author: Rachael
---

In this project, I dove into a deep exploration of quantitative trading strategies with a primary focus on alpha generation. The core of the project was to contrust a robust trading system that leverages advanced statistical models and machine learning techniques to uncover and exploit predictive signals in financial markets. This involved defininig a liquid universe of stocks, performinig intrincate factor analysis, and employing optimization algorithms to refine the trading strategies. 

The project workflow is comprised of these distinct stages:
1. Universe Data Collection
2. Alpha Factors
3. Factor Analysis
4. Factors Combination
5. Optimized Alpha Vector Portfolio
6. Risk Analysis


In this context, we have used different source of data provided from Sharadar and IFT as described below:
- Sharadar Equity Prices (SHARADAR/SEP): Updated daily EOD price data for more than 14,000 US public companies.
- Indicator Descriptions (SHARADAR/INDICATORS): Description of indicators listed in SF1 table for more than 14,000 US public companies.
- Tickers and Metadata (SHARADAR/TICKERS): Information and metadata for more than 14,000 US public companies.
- Core US Fundamentals (SHARADAR/SF1): 150 essential fundamental indicators and financial ratios, for more than 14,000 US public companies.
- Daily Metrics (SHARADAR/DAILY): 5 essential metrics indicators and financial ratios daily updated, for more than 14,000 US public companies.
- Sentiment Analysis and News Analytics (IFT/NSA): News, blogs, social media and proprietary sources for thousands of stocks. 



<h3 class="toc_title">1 - Universe Data Collection</h3>

<h4 class="toc_title">2 - 1: Benchmarking</h4>

The S&P 500 Index (Ticker: ^GSPC) is used as the benchmark to evaluate the performance of our trading strategy. 
- Purpose: To measure the alpha generated by the model relative to the market
- Metrics: Daily percentage change in closing prices

<h4 class="toc_title">2 - 2: Fundamental Data</h4>

SHARADAR/SF1 data is utilized for historical fundamental analysis, including:

- Source: Quandl (SHARADAR/SF1)
- Timeframe: Most Recent Quarter (MRQ)

<h4 class="toc_title">2 - 3: Daily Metrics</h4>

SHARADAR/DAILY data provides daily metrics for further factor analysis, including:

- OHLCV (Open, High, Low, Close, Volume)
- Daily Financial Ratios: Market Capitalization, EV/EBITDA, Price-to-Earnings (P/E), and more.


<h4 class="toc_title">2 - 4: Sentiment Analysis</h4>
IFT/NSA data is integrated to gauge market sentiment from:

- Sources: News, blogs, social media, and proprietary indicators.
- Metrics:
  - Overnight Sentiment (60 days)
  - Directional Movement (100 days)
 
This sentiment data is leveraged to capture market psychology, enhancing alpha generation by anticipating potential market movements.


<h3 class="toc_title">2 - Alpha Factors</h3>

Factor-driven alpha investment strategies, designed to delivering market-beating returns, come in a number of different forms. In this project, the following alpha factors are disccused:
1. **Daily Metrics** - Captures short-term price movements using daily financial ratios and market data.
2. **Simple Moving Average (SMA)** - Identifies trends by averaging closing prices over specified periods.
3. **Overnight Sentiment** - Analyzes sentiment from news and social media to anticipate market momentum.
4. **Mean Reversion** - Detects price extremes to capitalize on the tendency of prices to revert to the mean.
5. **Directional Movement** - Measures the strength and direction of price movements.
6. **Sentiment Analysis** - Incorporates broader market sentiment to enhance predictive accuracy.
7. **Volatility** - Assesses price fluctuations to adjust risk and position sizing.
8. **CAPM (Capital Asset Pricing Model)**: Evaluates systematic risk to adjust returns based on market movements.
9. **Fundamentals**: Integrates financial health indicators like Return on Equity (ROE) and Return on Assets (ROA)



<h3 class="toc_title">3 - All Factors Analysis</h3>

Now that we have preprocessed and regrouped our factor data, we can analyze each factor individually to assess its predictive power. The goal is to determine whether these factors can be effectively combined to enhance investment decision-making. 


<h4 class="toc_title">3 - 1: Forward return</h4>

With all factor scores calculated per asset, we compute the future returns over a specified holding period (10 days in this case). The forward returns represent the returns an investor would receive by holding an asset for the defined period. 

For each asset, the 10-day forward return is computed using the percentage change formula:
$$
\text{Forward Return} = \frac{\text{Price at }(t+10\text{ days}) - \text{Price at }(t)}{\text{Price at }(t)}
$$
Since we want to know today what the return will be over the next 10 days, we shift the date at the start of the 10 days, effectively treating the return as "forward-looking" from that date.

<h4 class="toc_title">3 - 2: Factor return</h4>

1. Calculate weights by subtracting the mean of factor scores at each date level.
2. Normalize the weights
3. Multiply the forward returns by the calculated weights
4. We get the factor returns by grouping the weighted returns by summing them.

Positive Factor Return: The factor has positively contributed to the portfolio's performance
Negative Factor Return: Suggests that the factor negatively impacts the portfolio's performance on that day. 

<h4 class="toc_title">3 - 3: Sharpe Ratio</h4>
To evaluate each factor's effectivess in a risk-adjusted manner, we calculate the Sharpe Ratio, which measures the excess return per unit of risk:

$$
\text{Sharpe Ratio} = \frac{\mathbb{E}[\text{Factor Returns}] \times \text{Annualization Factor}}{\sigma(\text{Factor Returns})}
$$


![Screenshot 2025-03-03 at 8 39 52 AM](https://github.com/user-attachments/assets/e9b3aa5f-04ae-4a2f-a654-08f98a6f6dc5)

From the analysis, factors such as channels100days, direction100days, and capm10days exhibit strong risk-adjusted returns, making them valuable for strategy development. Conversely, daily_pb100days and sma200 perform poorly, indicating they may not be useful in this particular approach. 


<h3 class="toc_title">4 - Combined Factors</h3>

After computing the Sharpe Ratio, we select the most predictive factors. Rather than relying on individual factors, we use XGBoost to determine the feature importance of each selected factor. The model is trained using closing prices and factor data to quantify how valuable each factor is in predicting asset returns. The XGBoost feature importance scores help adjust each factor's weighting, ensuring that more significant factors contribute more to the final composite signal. 

$$
\text{Weighted Factor} = \text{Feature Importance} \times \text{Factor Value}
$$

$$
\text{Alpha Vector} = \sum (\text{Weighted Factors})
$$


With the feature importance scores, we construct a single composite signal - the Alpha Vector.

The Alpha Vector essentially represents a single predictive value for each asset, synthesizing information from multiple factors into 1 metric. In investment terms, 'alpha' refers to the excess return on an investment relative to the benchmark index. An alpha vector in this context is a set of scores that estimates the expected relative performance of each asset, based on the weighted factors. Assets with high scores in the alpha vector are predicted to outperform those with lower scores. 


<h3 class="toc_title">5 - Optimized Alpha Vector Portfolio Analysis</h3>


With the optimized alpha vector, we simulate the performance of a portfolio built using the factor values as asset weights. Since quantiles 1 and 5 are most predictive, we simulate a portfolio where only those quantiles are traded. 
- long positions in assets with high alpha scores
- short position in assets with low alpha scores


![Screenshot 2025-03-03 at 8 57 38 AM](https://github.com/user-attachments/assets/17dce66c-8015-46d1-82be-06bca47d5a77)

As you can see, the factor quantiles over different holding periods (5-day, 10-day, and 20-day forward returns) display consistent patterns across timeframes. This consistency suggests that the factor used in this analysis has strong predictive power. Here are the key takeaways:
- The higher quantiles (quantile 5) consistently exhibit higher returns across all periods.
- The lower quantiles (quantiles 1 and 2) have relatively lower or negative returns.
  
The above further proves the long-short strategy where we long assets in the highest quantiles and short assets in the lowest quantiles. 

After backtesting, the optmized portfolio achieved the following key performance metrics:

<table>
    <tr>
        <th>Metric</th>
        <th>Value</th>
    </tr>
    <tr>
        <td>Annual Return</td>
        <td>4.1%</td>
    </tr>
    <tr>
        <td>Sharpe Ratio</td>
        <td>3.54</td>
    </tr>
    <tr>
        <td>Stability</td>
        <td>0.92</td>
    </tr>
    <tr>
        <td>Max Drawdown</td>
        <td>-1.1%</td>
    </tr>
</table>

The optimized alpha vector portfolio demonstrates that by combining multiple factors using machine learning, we can improve predictive accuracy, enhance returns, and reduce risk. 


<h3 class="toc_title">6 - Conclusions for Intraday Trading</h3>

In theory, the above analysis can also be extended to intraday trading, where we analyze short-term price movements rather than daily or longer-term trends. 

Intraday Factor Analysis Breakdown:
1. Load intraday price data at the minute level
2. Adjust factor timestamps to align with market open
3. Compute short-term forward returns such as 30 minutes, 1 hour, 1.5 hours, 2 hours, and 3 hours.
4. Evaluate factor quantiles
   - Stocks in the highest quantile based on positive factors like strong momentum are candidates for long positions. 
   - Stocks in the lowest quantile shows high volatility or negative momentum and are candidate for short positions. 
It's important to note that the factors in intraday trading should effectively reflect price momentum, volatility, overnight news, etc) 
